digitalBot:
  name: Archy_support_bot_Demo
  description: ""
  division: Home
  startUpRef: "/digitalBot/bots/bot[Initial Greeting_10]"
  defaultLanguage: en-us
  supportedLanguages:
    en-us:
      defaultLanguageSkill:
        noValue: true
  variables:
    - stringVariable:
        name: Flow.MenuOptionList
        initialValue:
          noValue: true
        isInput: true
        isOutput: false
    - stringCollectionVariable:
        name: Flow.MenuSelectionList
        initialValue:
          noValue: true
        isInput: true
        isOutput: false
    - stringVariable:
        name: Flow.MenuText
        initialValue:
          noValue: true
        isInput: true
        isOutput: false
    - stringVariable:
        name: Flow.MenuType
        initialValue:
          lit: Menu
        isInput: true
        isOutput: false
    - stringVariable:
        name: Flow.SelectedMenuOption
        initialValue:
          noValue: true
        isInput: false
        isOutput: true
    - stringVariable:
        name: Flow.SelectedMenuOptionIndex
        initialValue:
          noValue: true
        isInput: false
        isOutput: true
    - integerVariable:
        name: Flow.triesCounter
        initialValue:
          lit: 0
        isInput: false
        isOutput: false
    - stringVariable:
        name: Slot.DigitCollectionSlot
        initialValue:
          noValue: true
        isInput: true
        isOutput: true
    - stringVariable:
        name: Slot.MenuOptionSlot
        initialValue:
          noValue: true
        isInput: true
        isOutput: true
  settingsErrorHandling:
    errorHandling:
      exit:
        none: true
    enableAgentEscalation:
      lit: true
    errorEventHandover:
      exp: "MakeCommunication(\n  ToCommunication(ToCommunication(\"Sorry, an error occurred. One moment, please, while I put you through to someone who can help.\")))"
    agentEscalationConfirmation:
      exp: "MakeCommunication(\n  ToCommunication(ToCommunication(\"You want to speak to an advisor. Is that correct?\")))"
    agentEscalationHandover:
      exp: "MakeCommunication(\n  ToCommunication(ToCommunication(\"One moment, please, and I will put you through to someone.\")))"
    recognitionFailureEventHandover:
      exp: "MakeCommunication(\n  ToCommunication(ToCommunication(\"Sorry, I'm having trouble understanding you. One moment, please, while I put you through to someone who can help.\")))"
    recognitionFailureEventHandling:
      exit:
        none: true
    agentEscalationHandling:
      exit:
        none: true
  tasks:
    - task:
        name: DynamicDigit
        refId: DynamicDigit_29
        actions:
          - askForSlot:
              name: Ask for Slot
              slot:
                name: DigitCollectionSlot
              question:
                exp: Flow.MenuText
              customValidation:
                noValue: true
              confirmationMode:
                lit: never
              noMatch:
                exp: "MakeCommunication(\n  ToCommunication(ToCommunication(\"Please give me the (please put your slot name here)\")))"
              outputs:
                default:
                  actions:
                    - communicate:
                        name: Communicate
                        communication:
                          exp: "MakeCommunication(\n  ToCommunication(ToCommunication(Slot.DigitCollectionSlot)))"
                    - updateData:
                        name: Update Data
                        statements:
                          - string:
                              variable: Flow.SelectedMenuOption
                              value:
                                exp: Slot.DigitCollectionSlot
                maxNoInputs:
                  enabled: true
                  actions:
                    - exitBotFlow:
                        name: Exit Bot Flow
                maxNoMatches:
                  enabled: true
                  actions:
                    - exitBotFlow:
                        name: Exit Bot Flow
          - endTask:
              name: End Task
              outputPath:
                name: default
    - task:
        name: DynamicMenu
        refId: DynamicMenu_23
        actions:
          - askForSlot:
              name: Ask for Slot
              slot:
                name: MenuOptionSlot
              question:
                exp: Flow.MenuText
              customValidation:
                noValue: true
              confirmationMode:
                lit: never
              chooser:
                lit:
                  presentation:
                    lit: quickReplies
                  carousel:
                    exp: ""
                  quickReplies:
                    exp: ""
                  listPicker:
                    exp: ""
              noMatch:
                exp: "MakeCommunication(\n  ToCommunication(ToCommunication(\"Please give me the (please put your slot name here)\")))"
              outputs:
                default:
                  actions:
                    - updateData:
                        name: Update Data
                        statements:
                          - string:
                              variable: Flow.SelectedMenuOption
                              value:
                                exp: Slot.MenuOptionSlot
                          - string:
                              variable: Flow.SelectedMenuOptionIndex
                              value:
                                exp: ToString(Find(Flow.MenuSelectionList,Slot.MenuOptionSlot))
                maxNoInputs:
                  enabled: true
                  actions:
                    - callTask:
                        name: Call Task
                        targetTaskRef: "/digitalBot/tasks/task[StandardError_51]"
                        outputs:
                          default:
                            actions:
                              - jumpToTask:
                                  name: Jump to Reusable Task
                                  targetTaskRef: "/digitalBot/tasks/task[DynamicMenu_23]"
                maxNoMatches:
                  enabled: true
                  actions:
                    - callTask:
                        name: Call Task
                        targetTaskRef: "/digitalBot/tasks/task[StandardError_51]"
                        outputs:
                          default:
                            actions:
                              - jumpToTask:
                                  name: Jump to Reusable Task
                                  targetTaskRef: "/digitalBot/tasks/task[DynamicMenu_23]"
          - exitBotFlow:
              name: Exit Bot Flow
    - task:
        name: StandardError
        refId: StandardError_51
        actions:
          - updateData:
              name: Update Data
              statements:
                - integer:
                    variable: Flow.triesCounter
                    value:
                      exp: Flow.triesCounter+1
          - decision:
              name: Decision
              condition:
                exp: Flow.triesCounter>3
              outputs:
                "yes":
                  actions:
                    - communicate:
                        name: Communicate
                        communication:
                          exp: "MakeCommunication(\n  ToCommunication(ToCommunication(\"You have exceeded the maximum number of tries\")))"
                    - disconnect:
                        name: Disconnect
                "no":
                  actions:
                    - communicate:
                        name: Communicate
                        communication:
                          exp: "MakeCommunication(\n  ToCommunication(ToCommunication(\"Invalid Entry\")))"
                    - endTask:
                        name: End Task
                        outputPath:
                          name: default
  settingsBotFlow:
    dynamicSlotTypes:
      - dynamicSlotType:
          name: MenuOptionSlotType
          values:
            exp: Flow.MenuSelectionList
          synonyms:
            noValue: true
  settingsUserInput:
    noMatchesMax:
      lit: 0
    noInputsMax:
      lit: 0
    noInputsMaxExceededHandling:
      disconnect:
        none: true
    noInputsTimeout:
      lit:
        seconds: 20
    endOfSessionMessage:
      exp: "MakeCommunication(\n  ToCommunication(ToCommunication(\"I have not heard from you in a while, so I am closing this chat, please come back if you need my help again. Thank you.\")))"
    confirmationRejectionsMax:
      lit: 1
    collectionLowConfidenceThreshold:
      lit: 20
    collectionHighConfidenceThreshold:
      lit: 70
    confirmationLowConfidenceThreshold:
      lit: 40
    noMatchApology:
      exp: "MakeCommunication(\n  ToCommunication(ToCommunication(\"Sorry.\\n\\n\")))"
    noInputApology:
      exp: "MakeCommunication(\n  ToCommunication(ToCommunication(\"Sorry, I didn't receive any input from you.\\n\\n\")))"
    noToConfirmationApology:
      exp: "MakeCommunication(\n  ToCommunication(ToCommunication(\"My mistake.\")))"
    confirmationNoMatchApology:
      exp: "MakeCommunication(\n  ToCommunication(ToCommunication(\"Sorry, please input \\\"Yes\\\" or \\\"No\\\".\")))"
    confirmationNoInputApology:
      exp: "MakeCommunication(\n  ToCommunication(ToCommunication(\"Sorry, I didn't receive any input from you.  Please input \\\"Yes\\\" or \\\"No\\\".\")))"
  settingsKnowledge:
    none: true
  bots:
    - bot:
        name: Initial Greeting
        refId: Initial Greeting_10
        actions:
          - decision:
              name: Decision
              condition:
                exp: Flow.MenuType=="Digit"
              outputs:
                "yes":
                  actions:
                    - callTask:
                        name: Call Task
                        targetTaskRef: "/digitalBot/tasks/task[DynamicDigit_29]"
                "no":
                  actions:
                    - callTask:
                        name: Call Task
                        targetTaskRef: "/digitalBot/tasks/task[DynamicMenu_23]"
          - exitBotFlow:
              name: Exit Bot Flow
  settingsNaturalLanguageUnderstanding:
    nluDomainVersion:
      intents: []
      entities:
        - name: DigitCollectionSlot
          type: DigitCollectionSlotType
        - name: MenuOptionSlot
          type: MenuOptionSlotType
      entityTypes:
        - name: DigitCollectionSlotType
          description: The description of the Entity Type "DigitCollectionSlotType"
          mechanism:
            type: Regex
            restricted: true
            items:
              - value: "([0-9][^0-9]*){5}"
                synonyms: []
        - name: MenuOptionSlotType
          description: The description of the Entity Type "MenuOptionSlotType"
          mechanism:
            type: DynamicList
      language: en-us
      languageVersions: {}
    mutedUtterances: []
